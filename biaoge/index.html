<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>考勤记录</title>
    <meta name="x5-orientation" content="portrait">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<script type="text/javascript">//记得js放在头部
	(function(html){
            change()
            function change(){
                var w = html.clientWidth
                var size = 100*(w/375).toFixed(2)
                html.style.fontSize = size+"px"
            }
            window.addEventListener('resize',function(){
                change()
            })
        })(document.documentElement)
</script>
<style>
body,h1,h2,h3,h4,p,dl,dd,ul,ol,form,input,textarea,th,td,select{margin: 0;padding: 0;}
em{font-style: normal;}
li{list-style: none;}
a{text-decoration: none;}
img{border: none;vertical-align: top;}
/*table{border-collapse: collapse;}*/
input,textarea{outline: none;}
textarea{resize:none;overflow: auto;}
body{font-size:12px;font-family: arial;}
html,body{
    width: 100%;
    height: 100%;
}
body,html{
	font-size: .16rem;
}
* {
-webkit-touch-callout:none;
-webkit-user-select:none;
-khtml-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none;
}
.lod{
        display: none;
    }

	/*左右表格的统一颜色,圆角和居中*/
	.sign-table td{
		text-align: center;
		background: #f8f8f8;
		-moz-border-radius: .1rem; 
		-webkit-border-radius: .1rem;
	}
	/*左表格浮到左边*/
	.sign-left{
		width: 1rem;
		float: left;
	}

	/*包围右表格的父级 浮到右边 固定宽度超出隐藏*/
	.week-wrap{
		-moz-border-radius: .1rem; 
		-webkit-border-radius: .1rem;
		position: relative;
		float: right;
		width: 2.69rem;
		overflow: hidden;
	}
    /*左表日期样式*/
    .dates{
        /*  font-size: .15rem;
            margin-right: .1rem;
            margin-left: -.8rem;
        */

           
        color: #a8a6a6;
        font-size: 12px;
         margin-top: -0.03rem;
        margin-bottom: -.05rem;
    }
	/*右表格总长和定位*/
	.sign-right{
		position: absolute;
		top: 0;
		left: 0;
		width: 19rem;
	}
	/*大节字体颜色*/
	.week-typeface{
		color: #cfcfcf;
	}
    .coverage{
        width: 100%;
        height: 100%;
        background: grey;
        display: none;
    }
#canvas{
     display: none;
}







@-webkit-keyframes rotation {
    10% {
        transform: rotate(90deg);
        -webkit-transform: rotate(90deg)
    }
    50% {
        transform: rotate(0);
        -webkit-transform: rotate(0)
    }
    60% {
        transform: rotate(0);
        -webkit-transform: rotate(0)
    }
    90% {
        transform: rotate(90deg);
        -webkit-transform: rotate(90deg)
    }
    100% {
        transform: rotate(90deg);
        -webkit-transform: rotate(90deg)
    }
}

.mod-orient-layer {
    display: none;
    position: fixed;
    height: 100%;
    width: 100%;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    background: #000;
    z-index: 9997
}

.mod-orient-layer__content {
    position: absolute;
    width: 100%;
    top: 45%;
    margin-top: -75px;
    text-align: center
}

.mod-orient-layer__icon-orient {
    display: inline-block;
    width: 67px;
    height: 109px;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAADaCAMAAABU68ovAAAAXVBMVEUAAAD29vb////x8fH////////x8fH5+fn29vby8vL////5+fn39/f6+vr////x8fH////////+/v7////09PT////x8fH39/f////////////////////x8fH///+WLTLGAAAAHXRSTlMAIpML+gb4ZhHWn1c2gvHBvq1uKJcC6k8b187lQ9yhhboAAAQYSURBVHja7d3blpowFIDhTUIAOchZDkre/zE7ycySrbUUpsRN2/1fzO18KzEqxEVgTiZNfgmmtxRc8iaR8HNe8x4BtjQePKayYCIoyBSgvNNE1AkNSHqZyLqk97EgUCCHBzZ5mkg7ScvIJuIyOyXBRFxgpqWZyGsAZLB1KjsJi8nutHU4JCRbFRH8tmirI9k8Jx2sqNs8K/m0LQkrktO2crgcgXGB4AiTEsB0hJfo9MGgX7CGcYiYwQxmMOOvZwRhBG8tCoMXjBDeXvWCEcHbi14wgCBmMIMZzGAGM5jxETNwzMAxA8cMHDNwzMAxA8cMHDNwzMAxA8cMHDNwzMAxY6E2rUQxnH2tz9cirlJFwFBJedaPnUv0M7++egPDE8iAJcIDmxwH5wwv9vUviw2kLbVO3TJU5uul/EyB0FoLp4x60PdGUd3qPurrWyjGGTc05u+1dcgI7/+tCCPARWGhH7o5Y7RCf+bH9ctXLp6v2BVDxfqz0oPXeSVaNtINo/1SXDv4dck8IIkbhtC2ol+iouEonTBCbYvVMnXOjxww6s/RFrBUpXHh/gw1rHj5d/qhYn9Gpk2FWh6xRBRX5Oj3Znh2Sq49/L6+y8pB26q9GbE2dbA2mVbx6I+7MfBglLCttm73ZQi7AD3iL4HqjFYJHSPRppqaUaJ3ATpGa+ckpGak2hRRMyqjGMkvl+xyFeSMwjAqcsZgGDdyhl0oNTnDN4yenJGZFGxNChP5/Y3efh6SM2rDOJMzboYxkDMqwyjIGcIw6F+io2FU1IxIm1JqRmgXSkvNKNCXeTpGrU0JNSO2c6LIGPgCS8AuDHz9ta0SXWDtxoDRH+MqlbC2Dt2G2JFRadtQZt2qq/orGowdGb2euxYiqWEpVWhTBnszoNAPdStuQwxqf0aocdWKW4Z+DfszIh8pxJqbuCE4YAC+4bm0evtipjpgJHeFnyyt1Ku2xa0bhjxr27p75rECNwyI9ZwvXkHq+7aTaMEV44YYy/spfgjgjNHaWW+GeUhGEX7tLlVinIFDDSgnOwhi1V6bU0b6tVS9eAERe863g4dRrtiHdc6o+nn5vtyVVgR79Cqt4uL6gfHPQyGqtP2vf7HADGbcYwaOGThm4JiBYwaOGThm4JiBYwaOGThm4JiBYwaOGThm4JiBYwaOGThm4JjhtOM+J/AgT008yDMkN/dPP9hzS8zAMQN3OEYeekp5YU7KOKXwVXqiY+QS7smcinGKABWdiBgpPJTSMHJ4KidhhPBUSMLw4CmPhKHgKUXCkHsygum71ftNSgCX6bsl8FQyfbcL5EdYsDk0R3j7aiA5wpt5AjKg/2gLJEBD/0Hf2OOf/vRrj6z/7GtP4B3nMKyjHA12kIPSjnJs3FEO0TvKkYJHOWCR+rjJH0Vn6fI5PjNbAAAAAElFTkSuQmCC');
    transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    -webkit-animation: rotation infinite 1.5s ease-in-out;
    animation: rotation infinite 1.5s ease-in-out;
    -webkit-background-size: 67px;
    background-size: 67px
}

.mod-orient-layer__desc {
    margin-top: 20px;
    font-size: 15px;
    color: #fff
}

.mod-orient-layer__desc {
    margin-top: 20px;
    font-size: 15px;
    color: #fff
}
</style>
<div id="orientLayer" class="mod-orient-layer" style="display: block;">
    <div class="mod-orient-layer__content">
        <i class="icon mod-orient-layer__icon-orient"></i>

        <div class="mod-orient-layer__desc">为了更好的体验，请使用竖屏浏览</div>
    </div>
</div>
<!-- <body id="orientLayer"> -->
<!-- <div class="coverage"></div> -->
<canvas id="canvas"></canvas>
<!-- 总布局说明 分两个表格两表高度用js根据获取可视窗口来赋值 左右各自浮动 左表格固定数据不能移动 右表格固定宽度里面超出隐藏一整个星期的签到表格 -->

	<!-- 左边固定表格 -->
    <table class="sign-table sign-left">
    	<tr class="sign-top">
    		<td colspan="2" >第十七周</td>
    		
    	</tr>
    	<tr>
    		<td rowspan="4">上午</td>
    		<td>第1节</td>
    		
    	</tr>
    	<tr>
    		<td>第2节</td>
    	</tr>
    	<tr>
        	<td>第3节</td>
        	
        </tr>
        <tr>
        	<td>第4节</td>
        </tr>
		
		<tr>
    		<td rowspan="4">下午</td>
    		<td>第5节</td>
    		
    	</tr>
    	<tr>
    		<td>第6节</td>
    	</tr>
    	<tr>
          <td>第7节</td>
         
        </tr>
        <tr>
        	<td>第8节</td>
        </tr>
        <tr>
    		<td rowspan="4">晚上</td>
    		<td>第9节</td>
    		
    	</tr>
    	<tr>
    		<td>第10节</td>
    	</tr>
    	<tr>
          <td>第11节</td>
          
        </tr>
        <tr>
        	<td>第12节</td>
        </tr>

    </table>

	<!-- 右边滑动查看模块 -->
	<div class="week-wrap">
		<table class="sign-table sign-right">
	    	<tr class="week-top">
	    		<td colspan="2">星期一<p class="
                dates"></p></td>
	    		<td colspan="2">星期二<p class="
                dates"></p></td>
	    		<td colspan="2">星期三<p class="
                dates"></p></td>
	    		<td colspan="2">星期四<p class="
                dates"></p></td>
	    		<td colspan="2">星期五<p class="
                dates"></p></td>
	    		<td colspan="2">星期六<p class="
                dates"></p></td>
	    		<td colspan="2">星期天<p class="
                dates"></p></td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	    		<td >第一大节上课</td>
    			<td >第一大节下课</td>
	    		<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	    		<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
	    	</tr>
	    	
			
			<tr class="week-typeface" rowspan="2">
	    		<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	    		<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	        	<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
	        </tr>
	        <tr class="week-typeface" rowspan="2">
	        	<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
	        </tr>
	    </table>	
	</div>

<script type="text/javascript" src="jquery-3.0.0.min.js"></script>
<script>
            // loaded完js再显示
             var lod = document.querySelector("#orientLayer")
        
            lod.style.display="block";



var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var cw = document.documentElement.clientWidth;
var ch = document.documentElement.clientHeight;
canvas.width = cw;
canvas.height = ch;
var bc = 120,bcsd = 5,bw = 2,bwsd = 0.4,fh = 300,fs = 12;
var arr = [];
var texts = "oiwhqiohdiuwgqhf".split("");
var lk = Math.ceil(cw/fs);
for (var i = 0; i < lk; i++) {
    arr[i] = 1
}
function run(){
    ctx.fillStyle = "rgba(0,24,0,0.08)";
    ctx.fillRect(0,0,cw,ch);
    ctx.fillStyle = "green";
    ctx.font = fs+"px Arial";
    for (var i = 0; i < arr.length; i++) {
        var text = texts[Math.floor(Math.random()*texts.length)];
        ctx.fillText(text,i*fs,arr[i]*fs);
        if (arr[i]>ch || Math.random()>0.95) {
            arr[i] = 0;
        }
        arr[i]++;
    }
    drawText()
    window.onresize = function(){
        cw = document.documentElement.clientWidth;
        ch = document.documentElement.clientHeight;
        canvas.width = cw;
        canvas.height = ch;
        lk = Math.ceil(cw/fs);
        var lk = Math.ceil(cw/fs);
        for (var i = 0; i < lk; i++) {
            arr[i] = 1
        }
    }
}
function drawText(){
    ctx.save();
    ctx.fillStyle = "rgb(0,24,0)";
    ctx.font = fh+"% Airal";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    bw+=bwsd;
    ctx.shadowBlur = bw;
    if (bw>=14) {
        bwsd*=-1;
    }else if(bw<=0){
        bwsd*=-1;
    }
    bc+bcsd;
    ctx.shadowColor = 'rgb('+bc+',0,0)';
    if (bc>=255) {
        bcsd*=-1;
    }else if(bc<=115){
        bcsd*=-1;
    }
    ctx.fillText("请竖屏观看",cw/2,ch/2)
    ctx.font = fh+"% Airal";
    // ctx.fillText("请竖屏观看！",cw/2,ch/2-45)
    ctx.restore();
}
setInterval(run,40);






var orientLayer = document.getElementById("orientLayer"); //判断横屏竖屏 
function checkDirect() { if (document.documentElement.clientHeight >= document.documentElement.clientWidth) { return "portrait"; } else { return "landscape"; } } //显示屏幕方向提示浮层 
function orientNotice() { var orient = checkDirect(); if (orient == "portrait") { orientLayer.style.display = "none"; } else { orientLayer.style.display = "block"; } } function init() { orientNotice(); window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", function () { setTimeout(orientNotice, 200); }) } init(); 





// var coverage = document.querySelector(".coverage");
// window.onorientationchange=function(){


//     if(window.orientation==0){
//             coverage.style.display='none';
//         }else
//         { 
//             coverage.style.display='block';
//                 // alert('请使用竖屏观看！111');
               
//         }
// }; 

            //防止移动端上下拖拉窗口
            window.onload=test();//网页加载再执行
            function test(){
                 function stopDrop() {
                    var lastY;//最后一次y坐标点
                    var bd = document.body;
                  document.addEventListener('touchstart', function(e) {
                        lastY = e.touches[0].clientY;//点击屏幕时记录最后一次Y度坐标。
                        e.preventDefault();
                    });
                   document.addEventListener('touchmove', function(e) {
                        var y = e.touches[0].clientY;
                        var st = document.documentElement.scrollTop; //滚动条高度  
                        
                        if (y >= lastY && st <= 10) {//如果滚动条高度小于0，可以理解为到顶了，且是下拉情况下，阻止touchmove事件。防止移动端下拖拉窗口
                            lastY = y;
                            e.preventDefault();
                        }
                        if (y <= lastY && st <= 10) {//防止移动端上拖拉窗口
                            lastY = y;
                            e.preventDefault();
                        }
                        lastY = y;
                    });
                }
                stopDrop();
            }
			// 计算可视高度 赋值给表格
            var topPrice = document.documentElement.clientHeight-53;
            var signTable = document.querySelectorAll(".sign-table");
            var weekWrap = document.querySelector(".week-wrap")
            signTable[0].style.height=topPrice+"px";
            signTable[1].style.height=topPrice+"px";
            weekWrap.style.height=topPrice+"px";
            // var  knobH= (document.documentElement.clientHeight-53-10-topPrice)/3;
            // $(".sign-table").css("height",topPrice+"px");
            // $(".week-wrap").css("height",topPrice+"px");


            // 计算表格右第一栏的高度赋值给表格右第一栏的高度
            var weekTop = document.querySelector(".week-top")
            var signTop = document.querySelector(".sign-top")
            var signTopH = signTop.offsetHeight;
            weekTop.style.height=signTopH+"px";
            // $(".week-top").css("height",signTopH+"px");

            // 计算右表格占据剩余宽度
            // var weekWrap = document.querySelector(".week-wrap");
            var signRight = document.querySelector(".sign-right")
            var signLeft = document.querySelector(".sign-left");
            var weekW = document.body.offsetWidth -signLeft.offsetWidth;
            weekWrap.style.width=weekW+"px";
            signRight.style.width=weekW*7+"px";// 算右表格的总宽度
            // $(".week-wrap").css("width",weekW+"px");
			



            var a = new Array("7", "1", "2", "3", "4", "5", "6");  
            var week = new Date().getDay();  
            var str = "今天是星期"+ a[week]; 
            // console.log(weekW*7,a[week],weekW*7*a[week])
           signRight.style.transform = "translate3d("+weekW*(a[week]-1)*-1+"px,0px,0px)";




        var dates = document.querySelectorAll(".dates")
        window.onload = function(){         
            // var cells = document.getElementById('monitor').getElementsByTagName('td');
            var clen = dates.length;
            var currentFirstDate;
            var formatDate = function(date){             
                var year = date.getFullYear()+'年';
                var month = (date.getMonth()+1)+'月';
                var day = date.getDate()+'日';
                var week = [date.getDay()];  

                return year+month+day;
            };
            var addDate= function(date,n){       
                date.setDate(date.getDate()+n);        
                return date;
            };
            var setDate = function(date){             
                var week = date.getDay()-1;
                date = addDate(date,week*-1);
                currentFirstDate = new Date(date);

                for(var i = 0;i<clen;i++){                 
                    dates[i].innerHTML = formatDate(i==0 ? date : addDate(date,1));
                }                
            };

            // 可以点击下一周             
            // document.getElementById('last-week').onclick = function(){
            //     setDate(addDate(currentFirstDate,-7));         
            // };             
            // document.getElementById('next-week').onclick = function(){                 
            //     setDate(addDate(currentFirstDate,7));
            // };     
            setDate(new Date());
        }





			// 查看 移动事件
            
            var weekWrap = document.querySelector(".week-wrap")
            var x = 0;
            var y = 0;
            var dx = 0;
            var dy = 0;
            var left =weekW*(a[week]-1)*-1;//由于把定位改为translate3d,获取offsetLeft一直为零,需要存贮定位left的值
            var bol = false;//一开始设置bol = false;为了不让手指点击div以外地方触碰函数的发现
            signRight.addEventListener("touchstart",function (e) {//手指开始触碰事件
                dx = e.touches[0].clientX - left//由于把定位改为translate3d,获取offsetLeft一直为零,需要存贮定位left的值
                bol = true;//当手开始触碰时bol = true;
                e.preventDefault()
                // console.log(dx)
            })
            signRight.addEventListener("touchmove",function(e){//记得用document来定义,表示全部的
                var move = e.touches[0].clientX - dx;
                if (!bol) {
                    return;
                }
                if (move>0) {//判断左边
                    move = 0;
                }else if (move<weekWrap.offsetWidth-signRight.offsetWidth) {//判断右边
                    move = weekWrap.offsetWidth-signRight.offsetWidth;
                }
                // console.log(signRight.offsetLeft)
                //移动位置
                    signRight.style.transform = "translate3d("+move+"px,0px,0px)";
                    left=move;//由于把定位改为translate3d,获取offsetLeft一直为零,需要存贮定位left的值
                
                
            })
           






	
	
</script>

</body>
</html>