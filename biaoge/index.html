<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<script type="text/javascript">//记得js放在头部
	(function(html){
            change()
            function change(){
                var w = html.clientWidth
                var size = 100*(w/375).toFixed(2)
                html.style.fontSize = size+"px"
            }
            window.addEventListener('resize',function(){
                change()
            })
        })(document.documentElement)
</script>
<style>
body,h1,h2,h3,h4,p,dl,dd,ul,ol,form,input,textarea,th,td,select{margin: 0;padding: 0;}
em{font-style: normal;}
li{list-style: none;}
a{text-decoration: none;}
img{border: none;vertical-align: top;}
table{border-collapse: collapse;}
input,textarea{outline: none;}
textarea{resize:none;overflow: auto;}
body{font-size:12px;font-family: arial;}
html,body{
    width: 100%;
    height: 100%;
}
body,html{
	font-size: .16rem;
}
* {
-webkit-touch-callout:none;
-webkit-user-select:none;
-khtml-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none;
}
.lod{
        display: none;
    }

	/*左右表格的统一颜色,圆角和居中*/
	.sign-table td{
		text-align: center;
		background: #f8f8f8;
		-moz-border-radius: .1rem; 
		-webkit-border-radius: .1rem;
	}
	/*左表格浮到左边*/
	.sign-left{
		width: 1rem;
		float: left;
	}

	/*包围右表格的父级 浮到右边 固定宽度超出隐藏*/
	.week-wrap{
		-moz-border-radius: .1rem; 
		-webkit-border-radius: .1rem;
		position: relative;
		float: right;
		width: 2.69rem;
		overflow: hidden;
	}
    /*左表日期样式*/
    .dates{
        /*  font-size: .15rem;
            margin-right: .1rem;
            margin-left: -.8rem;
        */

           
        color: #a8a6a6;
        font-size: .01rem;
        margin-top: .04rem;
        margin-bottom: -.05rem;
    }
	/*右表格总长和定位*/
	.sign-right{
		position: absolute;
		top: 0;
		left: 0;
		width: 19rem;
	}
	/*大节字体颜色*/
	.week-typeface{
		color: #cfcfcf;
	}


</style>
<body class="lod">

<!-- 总布局说明 分两个表格两表高度用js根据获取可视窗口来赋值 左右各自浮动 左表格固定数据不能移动 右表格固定宽度里面超出隐藏一整个星期的签到表格 -->

	<!-- 左边固定表格 -->
    <table class="sign-table sign-left">
    	<tr class="sign-top">
    		<td colspan="2" >第十七周</td>
    		
    	</tr>
    	<tr>
    		<td rowspan="4">上午</td>
    		<td>第1节</td>
    		
    	</tr>
    	<tr>
    		<td>第2节</td>
    	</tr>
    	<tr>
        	<td>第3节</td>
        	
        </tr>
        <tr>
        	<td>第4节</td>
        </tr>
		
		<tr>
    		<td rowspan="4">下午</td>
    		<td>第5节</td>
    		
    	</tr>
    	<tr>
    		<td>第6节</td>
    	</tr>
    	<tr>
          <td>第7节</td>
         
        </tr>
        <tr>
        	<td>第8节</td>
        </tr>
        <tr>
    		<td rowspan="4">晚上</td>
    		<td>第9节</td>
    		
    	</tr>
    	<tr>
    		<td>第10节</td>
    	</tr>
    	<tr>
          <td>第11节</td>
          
        </tr>
        <tr>
        	<td>第12节</td>
        </tr>

    </table>

	<!-- 右边滑动查看模块 -->
	<div class="week-wrap">
		<table class="sign-table sign-right">
	    	<tr class="week-top">
	    		<td colspan="2">星期一<p class="
                dates"></p></td>
	    		<td colspan="2">星期二<p class="
                dates"></p></td>
	    		<td colspan="2">星期三<p class="
                dates"></p></td>
	    		<td colspan="2">星期四<p class="
                dates"></p></td>
	    		<td colspan="2">星期五<p class="
                dates"></p></td>
	    		<td colspan="2">星期六<p class="
                dates"></p></td>
	    		<td colspan="2">星期天<p class="
                dates"></p></td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	    		<td >第一大节上课</td>
    			<td >第一大节下课</td>
	    		<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
    			<td >第一大节上课</td>
    			<td >第一大节下课</td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	    		<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
    			<td >第二大节上课</td>
    			<td >第二大节下课</td>
	    	</tr>
	    	
			
			<tr class="week-typeface" rowspan="2">
	    		<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
    			<td >第三大节上课</td>
    			<td >第三大节下课</td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	    		<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
    			<td >第四大节上课</td>
    			<td >第四大节下课</td>
	    	</tr>
	    	<tr class="week-typeface" rowspan="2">
	        	<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
    			<td >第五大节上课</td>
    			<td >第五大节下课</td>
	        </tr>
	        <tr class="week-typeface" rowspan="2">
	        	<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
    			<td >第六大节上课</td>
    			<td >第六大节下课</td>
	        </tr>
	    </table>	
	</div>

<script type="text/javascript" src="jquery-3.0.0.min.js"></script>
<script>
            // loaded完js再显示
             var lod = document.querySelector(".lod")
        
            lod.style.display="block";


// window.onresize = function(){}



            //防止移动端上下拖拉窗口
            window.onload=test();//网页加载再执行
            function test(){
                 function stopDrop() {
                    var lastY;//最后一次y坐标点
                    var bd = document.body;
                  document.addEventListener('touchstart', function(e) {
                        lastY = e.touches[0].clientY;//点击屏幕时记录最后一次Y度坐标。
                        e.preventDefault();
                    });
                   document.addEventListener('touchmove', function(e) {
                        var y = e.touches[0].clientY;
                        var st = document.documentElement.scrollTop; //滚动条高度  
                        
                        if (y >= lastY && st <= 10) {//如果滚动条高度小于0，可以理解为到顶了，且是下拉情况下，阻止touchmove事件。防止移动端下拖拉窗口
                            lastY = y;
                            e.preventDefault();
                        }
                        if (y <= lastY && st <= 10) {//防止移动端上拖拉窗口
                            lastY = y;
                            e.preventDefault();
                        }
                        lastY = y;
                    });
                }
                stopDrop();
            }
			// 计算可视高度 赋值给表格
            var topPrice = document.documentElement.clientHeight-53;
            var signTable = document.querySelectorAll(".sign-table");
            var weekWrap = document.querySelector(".week-wrap")
            signTable[0].style.height=topPrice+"px";
            signTable[1].style.height=topPrice+"px";
            weekWrap.style.height=topPrice+"px";
            // var  knobH= (document.documentElement.clientHeight-53-10-topPrice)/3;
            // $(".sign-table").css("height",topPrice+"px");
            // $(".week-wrap").css("height",topPrice+"px");


            // 计算表格右第一栏的高度赋值给表格右第一栏的高度
            var weekTop = document.querySelector(".week-top")
            var signTop = document.querySelector(".sign-top")
            var signTopH = signTop.offsetHeight;
            weekTop.style.height=signTopH+"px";
            // $(".week-top").css("height",signTopH+"px");

            // 计算右表格占据剩余宽度
            // var weekWrap = document.querySelector(".week-wrap");
            var signRight = document.querySelector(".sign-right")
            var signLeft = document.querySelector(".sign-left");
            var weekW = document.body.offsetWidth -signLeft.offsetWidth;
            weekWrap.style.width=weekW+"px";
            signRight.style.width=weekW*7+"px";// 算右表格的总宽度
            // $(".week-wrap").css("width",weekW+"px");
			



            var a = new Array("7", "1", "2", "3", "4", "5", "6");  
            var week = new Date().getDay();  
            var str = "今天是星期"+ a[week]; 
            // console.log(weekW*7,a[week],weekW*7*a[week])
           signRight.style.transform = "translate3d("+weekW*(a[week]-1)*-1+"px,0px,0px)";




        var dates = document.querySelectorAll(".dates")
        window.onload = function(){         
            // var cells = document.getElementById('monitor').getElementsByTagName('td');
            var clen = dates.length;
            var currentFirstDate;
            var formatDate = function(date){             
                var year = date.getFullYear()+'年';
                var month = (date.getMonth()+1)+'月';
                var day = date.getDate()+'日';
                var week = [date.getDay()];  

                return year+month+day;
            };
            var addDate= function(date,n){       
                date.setDate(date.getDate()+n);        
                return date;
            };
            var setDate = function(date){             
                var week = date.getDay()-1;
                date = addDate(date,week*-1);
                currentFirstDate = new Date(date);

                for(var i = 0;i<clen;i++){                 
                    dates[i].innerHTML = formatDate(i==0 ? date : addDate(date,1));
                }                
            };             
            // document.getElementById('last-week').onclick = function(){
            //     setDate(addDate(currentFirstDate,-7));         
            // };             
            // document.getElementById('next-week').onclick = function(){                 
            //     setDate(addDate(currentFirstDate,7));
            // };     
            setDate(new Date());
        }





			// 查看 移动事件
            
            var weekWrap = document.querySelector(".week-wrap")
            var x = 0;
            var y = 0;
            var dx = 0;
            var dy = 0;
            var left =weekW*(a[week]-1)*-1;//由于把定位改为translate3d,获取offsetLeft一直为零,需要存贮定位left的值
            var bol = false;//一开始设置bol = false;为了不让手指点击div以外地方触碰函数的发现
            signRight.addEventListener("touchstart",function (e) {//手指开始触碰事件
                dx = e.touches[0].clientX - left//由于把定位改为translate3d,获取offsetLeft一直为零,需要存贮定位left的值
                bol = true;//当手开始触碰时bol = true;
                e.preventDefault()
                // console.log(dx)
            })
            document.addEventListener("touchmove",function(e){//记得用document来定义,表示全部的
                var move = e.touches[0].clientX - dx;
                if (!bol) {
                    return;
                }
                if (move>0) {//判断左边
                    move = 0;
                }else if (move<weekWrap.offsetWidth-signRight.offsetWidth) {//判断右边
                    move = weekWrap.offsetWidth-signRight.offsetWidth;
                }
                // console.log(signRight.offsetLeft)
                //移动位置
                    signRight.style.transform = "translate3d("+move+"px,0px,0px)";
                    left=move;//由于把定位改为translate3d,获取offsetLeft一直为零,需要存贮定位left的值
                
                
            })
            document.addEventListener("touchend",function(e){//手指离开事件,
                // bol = false;//当手离开时bol = false;
            })






	
	
</script>

</body>
</html>